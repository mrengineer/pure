<!DOCTYPE html>
<html>
<head>
    <title>WebUI Fix</title>
    <meta charset="UTF-8">
    <script src="webui.js"></script>
</head>
<body>
    <h1 id="main-status">Ожидание...</h1>
    <p>Ваш ID: <span id="my-id-display">?</span></p>
    <p>Время сервера: <span id="timer-display">--:--:--</span></p>
    
    <button onclick="webui.handle_request('ping')">Отправить Пинг</button>

    <script>
        // Эту функцию вызывает C++ через e->run_client или win.run
        function update_element(jsonString) {
            try {
                const data = JSON.parse(jsonString);
                const el = document.getElementById(data.dom_id);
                if (el) el.innerText = data.payload;
            } catch (e) {
                console.error("Ошибка парсинга:", e);
            }
        }
    </script>
</body>
</html>
